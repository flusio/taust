<?php $this->layout('base.phtml', ['title' => _f('Server %s', $this->protect($server->hostname))]); ?>

<h1><?= $this->protect($server->hostname) ?></h1>

<ul>
    <li>IP v4&nbsp;: <?= $server->ipv4 ?></li>
    <li>IP v6&nbsp;: <?= $server->ipv6 ?></li>
</ul>

<h2><?= _f('Server configuration') ?></h2>

<div id="server-conf" class="server-conf">
    <a class="server-conf__display" href="#server-conf">
        <?= _('Display') ?>
    </a>

    <a class="server-conf__hide" href="#">
        <?= _('Hide') ?>
    </a>

    <div class="server-conf__snippet">
        ENDPOINT=<?= url_full('create metrics') ?><br />
        AUTH_TOKEN=<?= $server->auth_token ?>
    </div>
</div>

<?php if ($metric_payload): ?>
    <h2><?= _('CPU') ?></h2>

    <ul>
        <?php foreach ($metric_payload->cpu_percent as $cpu_id => $percent): ?>
            <li>
                <?= _f('CPU%d', $cpu_id + 1) ?>: <?= $percent ?>&nbsp;%
            </li>
        <?php endforeach; ?>
    </ul>

    <h2><?= _('Memory') ?></h2>

    <p>
        <?= _f('%s used on %s', format_bytes($metric_payload->memory_total - $metric_payload->memory_available), format_bytes($metric_payload->memory_total)) ?>
        (<?= format_number(($metric_payload->memory_total - $metric_payload->memory_available) * 100 / $metric_payload->memory_total) ?>&nbsp;%)
    </p>

    <h2><?= _('Disks') ?></h2>

    <ul>
        <?php foreach ($metric_payload->disks as $disk): ?>
            <li>
                <?= $disk->name ?>:
                <?= _f('%s used on %s', format_bytes($disk->total - $disk->free), format_bytes($disk->total)) ?>
                (<?= format_number(($disk->total - $disk->free) * 100 / $disk->total) ?>&nbsp;%)
            </li>
        <?php endforeach; ?>
    </ul>
<?php endif; ?>
